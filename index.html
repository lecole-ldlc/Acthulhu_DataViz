<!DOCTYPE html>
<html dir="ltr" lang="fr-FR">
<head>

    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="Acthulhu"/>

    <!-- Stylesheets
    ============================================= -->
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,400italic,600,700|Raleway:300,400,500,600,700|Crete+Round:400italic"
          rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="css/bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="style.css" type="text/css"/>
    <link rel="stylesheet" href="css/dark.css" type="text/css"/>
    <link rel="stylesheet" href="css/font-icons.css" type="text/css"/>
    <link rel="stylesheet" href="css/animate.css" type="text/css"/>
    <link rel="stylesheet" href="css/magnific-popup.css" type="text/css"/>

    <link rel="stylesheet" href="css/responsive.css" type="text/css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="icon" type="image/png" href="images/ico.png" />

    <!-- Document Title
    ============================================= -->
    <title>Dataviz d'Acthulhu
    </title>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"
            integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
            crossorigin="anonymous"></script>


</head>

<body class="stretched">

<!-- Document Wrapper
============================================= -->
<div id="wrapper" class="clearfix">

    <!-- Page Title
    ============================================= -->
    <section id="page-title">

        <div class="container-fullwidth clearfix">
            <h1>Dataviz d'Acthulhu</h1>
        </div>

    </section><!-- #page-title end -->

    <!-- Content
    ============================================= -->
    <section id="content">

        <div class="content-wrap">

            <div class="container-fullwidth clearfix">

                <div class="col-full text-center" id="interactions">
                    <h2>Problématiques :</h2>
                    <button class="btn btn-primary problematique" id="pb1" data-key1="DureeMoyPartie"
                            data-key2="FreqJeu">Fréquence de jeu - durée moyenne d'une partie
                    </button>
                    <button class="btn btn-primary problematique" id="pb2" data-key1="PJMJ"
                            data-key2="DpnsAnnull">MJ PJ - dépenses
                    </button>
                    <button class="btn btn-primary problematique" id="pb3" data-key1="CSP" data-key2="FreqJeu">CSP -
                        fréquence
                    </button>
                    <button class="btn btn-primary problematique" id="pb4" data-key1="CSP" data-key2="PJMJ">MJ PJ - CSP
                    </button>
                    <a id="all" class="button">Séparer</a>
                </div>

                <div class="col-full" id="vis">
                </div>
                <div class="col_full">
                    Donec sed odio dui. Nulla vitae elit libero, a pharetra augue. Nullam id dolor id nibh ultricies
                    vehicula ut id elit. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Duis
                    mollis, est non commodo luctus. Aenean lacinia bibendum nulla sed consectetur. Cras mattis
                    consectetur purus sit amet fermentum. Donec id elit non mi porta gravida at eget metus. Lorem ipsum
                    dolor sit amet, consectetur adipiscing elit. Vestibulum id ligula porta felis euismod semper.
                </div>

                <div class="col_half">
                    <h5>Half Width</h5>
                    Donec sed odio dui. Nulla vitae elit libero, a pharetra augue. Nullam id dolor id nibh ultricies
                    vehicula ut id elit. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Duis
                    mollis, est non commodo luctus.
                </div>

                <div class="col_half col_last">
                    <h5>Half Width (Last)</h5>
                    Donec sed odio dui. Nulla vitae elit libero, a pharetra augue. Nullam id dolor id nibh ultricies
                    vehicula ut id elit. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Duis
                    mollis, est non commodo luctus.
                </div>

                <div class="clear"></div>

                <div class="col_two_third">
                    <h5>2/3 Width</h5>
                    Donec sed odio dui. Nulla vitae elit libero, a pharetra augue. Nullam id dolor id nibh ultricies
                    vehicula ut id elit. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Duis
                    mollis, est non commodo luctus. Aenean lacinia bibendum nulla sed consectetur. Cras mattis
                    consectetur purus sit amet fermentum. Donec id elit non mi porta gravida at eget metus. Lorem ipsum
                    dolor sit amet, consectetur adipiscing elit. Vestibulum id ligula porta felis euismod semper.
                </div>

                <div class="col_one_third col_last">
                    <h5>1/3 Width (Last)</h5>
                    Donec sed odio dui. Nulla vitae elit libero, a pharetra augue. Nullam id dolor id nibh ultricies
                    vehicula ut id elit. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Duis
                    mollis, est non commodo luctus.
                </div>

                <div class="clear"></div>

                <div class="col_one_fourth nobottommargin">
                    <h5>1/4 Width</h5>
                    Donec sed odio dui. Nulla vitae elit libero, a pharetra augue. Nullam id dolor id nibh ultricies
                    vehicula ut id elit. Integer posuere erat a ante.
                </div>

                <div class="col_three_fourth nobottommargin col_last">
                    <h5>3/4 Width (Last)</h5>
                    Donec sed odio dui. Nulla vitae elit libero, a pharetra augue. Nullam id dolor id nibh ultricies
                    vehicula ut id elit. Integer posuere erat a ante venenatis dapibus posuere velit aliquet. Duis
                    mollis, est non commodo luctus. Aenean lacinia bibendum nulla sed consectetur. Cras mattis
                    consectetur purus sit amet fermentum. Donec id elit non mi porta gravida at eget metus. Lorem ipsum
                    dolor sit amet, consectetur adipiscing elit. Vestibulum id ligula porta felis euismod semper.
                </div>

                <div class="clear"></div>

            </div>

        </div>

    </section><!-- #content end -->

    <!-- Dataviz
    ============================================= -->
    <section id="dataviz">

        <div class="container-fullwidth clearfix">

        </div>

    </section><!-- #page-title end -->

    <!-- Footer
    ============================================= -->
    <footer id="footer" class="dark">

        <div class="container-fullwidth">

        </div>

        <!-- Copyrights
        ============================================= -->
        <div id="copyrights">

            <div class="container-fullwidth clearfix">

                <div class="col_half">
                    Copyrights &copy; 2017 All Rights Reserved by Acthulhu<br>
                </div>

                <div class="col_half col_last tright">
                    <div class="fright clearfix">
                        <a href="#" class="social-icon si-small si-borderless si-facebook">
                            <i class="icon-facebook"></i>
                            <i class="icon-facebook"></i>
                        </a>

                        <a href="#" class="social-icon si-small si-borderless si-twitter">
                            <i class="icon-twitter"></i>
                            <i class="icon-twitter"></i>
                        </a>

                        <a href="#" class="social-icon si-small si-borderless si-gplus">
                            <i class="icon-gplus"></i>
                            <i class="icon-gplus"></i>
                        </a>

                        <a href="#" class="social-icon si-small si-borderless si-pinterest">
                            <i class="icon-pinterest"></i>
                            <i class="icon-pinterest"></i>
                        </a>

                        <a href="#" class="social-icon si-small si-borderless si-vimeo">
                            <i class="icon-vimeo"></i>
                            <i class="icon-vimeo"></i>
                        </a>

                        <a href="#" class="social-icon si-small si-borderless si-github">
                            <i class="icon-github"></i>
                            <i class="icon-github"></i>
                        </a>

                        <a href="#" class="social-icon si-small si-borderless si-yahoo">
                            <i class="icon-yahoo"></i>
                            <i class="icon-yahoo"></i>
                        </a>

                        <a href="#" class="social-icon si-small si-borderless si-linkedin">
                            <i class="icon-linkedin"></i>
                            <i class="icon-linkedin"></i>
                        </a>
                    </div>

                    <div class="clear"></div>

                    <i class="icon-envelope2"></i><a class="middot" href="mailto:hello@acthulhu.fr"> hello@acthulhu.fr </a>
                </div>

            </div>

        </div><!-- #copyrights end -->


        <script src="js/tooltip.js"></script>
        <script src="js/bubble_chart.js"></script>
        <a href="https://acthulhu.fr/">Acthulhu, l'actu tentaculaire</a>
    </footer><!-- #footer end -->

</div><!-- #wrapper end -->

<!-- Go To Top
============================================= -->
<div id="gotoTop" class="icon-angle-up"></div>

<!-- External JavaScripts
============================================= -->
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/plugins.js"></script>

<!-- Footer Scripts
============================================= -->
<script type="text/javascript" src="js/functions.js"></script>

<script>
    var myBubbleChart = bubbleChart();
    var data = [];

    /*
     * Function called once data is loaded from CSV.
     * Calls bubble chart function to display inside #vis div.
     */
    function data_loaded(error, data_l) {
        if (error) {
            console.log(error);
        }
        console.log(data_l);
        data = data_l;
        myBubbleChart = bubbleChart();
        myBubbleChart('#vis', data, "Sexe", "PJMJ");
        setupButtons();
    }

    $(".problematique").click(function (e) {
        var key1 = $(this).attr('data-key1');
        var key2 = $(this).attr('data-key2');
        console.log(key1, key2);
        myBubbleChart.redraw(key1, key2);
    });

    /*
     * Sets up the layout buttons to allow for toggling between view modes.
     */
    function setupButtons() {
        $("#all").click(function () {
            myBubbleChart.toggleDisplay();
        });
    }

    /*
     * Helper function to convert a number into a string
     * and add commas to it to improve presentation.
     */
    function addCommas(nStr) {
        nStr += '';
        var x = nStr.split('.');
        var x1 = x[0];
        var x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + ',' + '$2');
        }

        return x1 + x2;
    }

    // Load the data.
    d3.csv('2K_full_clean.csv', data_loaded);
    console.log("coucou");

    // setup the buttons.
</script>

</body>
</html>