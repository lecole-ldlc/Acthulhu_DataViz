<!DOCTYPE html>
<html dir="ltr" lang="fr-FR">
<head>

    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="Acthulhu"/>

    <!-- Stylesheets
    ============================================= -->
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,400italic,600,700|Raleway:300,400,500,600,700|Crete+Round:400italic"
          rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="css/bootstrap.css" type="text/css"/>
    <link rel="stylesheet" href="style.css" type="text/css"/>
    <link rel="stylesheet" href="css/dark.css" type="text/css"/>
    <link rel="stylesheet" href="css/font-icons.css" type="text/css"/>
    <link rel="stylesheet" href="css/animate.css" type="text/css"/>
    <link rel="stylesheet" href="css/magnific-popup.css" type="text/css"/>
    <link rel="icon" type="image/png" href="images/ico.png"/>
    <link rel="stylesheet" href="css/responsive.css" type="text/css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!-- Document Title
    ============================================= -->
    <title>Dataviz d'Acthulhu
    </title>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js"
            integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
            crossorigin="anonymous"></script>


</head>

<body class="stretched">

<!-- Document Wrapper
============================================= -->
<div id="wrapper" class="clearfix">

    <!-- Page Title
    ============================================= -->
    <!-- TODO : put padding in CSS -->
    <section id="page-title" style="padding-top: 30px; padding-bottom: 30px">

        <div class="container-fullwidth clearfix">
            <h1>Dataviz d'Acthulhu</h1>
        </div>

    </section><!-- #page-title end -->

    <!-- Content
    ============================================= -->
    <section id="content">

        <!-- TODO : put padding in CSS -->
        <div class="content-wrap" style="padding-top: 30px;">

            <div class="container-fullwidth clearfix">

                <div class="col-lg-3 text-center" id="interactions">

                    <div id="exp1">
                        <h2>Explications 1 --></h2>

                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla odio ex, congue facilisis
                            nulla
                            eu, scelerisque luctus nibh. Integer id elementum turpis. Etiam sit amet enim ante. Praesent
                            efficitur urna mauris, sit amet tempus enim condimentum sed. Aliquam in sodales odio, vitae
                            ullamcorper est. Sed. </p>
                    </div>

                    <h2>Problématiques</h2>

                    <!--<div class="col-lg-12 col_last"
                         style="border-bottom: 5px;padding-bottom: 5px;padding-top: 5px;">
                        <button class="btn btn-primary problematique" id="pb1" data-key1="AnneeNaissance"
                                data-key2="Sexe"> Quelle est la corrélation entre l'age des rolistes<br>
                            et leur genre ?
                        </button>
                    </div>-->
                    <div class="col-lg-12 col_last" style="border-bottom: 5px;padding-bottom: 5px;padding-top: 5px;">
                        <button class="btn btn-primary problematique" id="pb2" data-key1="AnneeNaissance"
                                data-key2="AgeDec"> Quelle est la corrélation entre l'age des
                            rolistes<br> et leur age de découverte ?
                        </button>
                    </div>
                    <div class="col-lg-12 col_last" style="border-bottom: 5px;padding-bottom: 5px;padding-top: 5px;">
                        <button class="btn btn-primary problematique" id="pb3" data-key1="AnneeNaissance"
                                data-key2="PJMJ"> Quelle est la corrélation entre l'age des
                            rolistes<br> et leur role préféré ?
                        </button>
                    </div>
                    <div class="col-lg-12 col_last" style="border-bottom: 5px;padding-bottom: 5px;padding-top: 5px;">
                        <button class="btn btn-primary problematique" id="pb4" data-key1="AnneeNaissance"
                                data-key2="FreqJeu"> Quelle est la corrélation entre l'age des
                            rolistes<br> et leur fréquence de jeu ?
                        </button>
                    </div>
                    <div class="col-lg-12 col_last" style="border-bottom: 5px;padding-bottom: 5px;padding-top: 5px;">
                        <button class="btn btn-primary problematique" id="pb5" data-key1="AnneeNaissance"
                                data-key2="DpnsAnnull">Quelle est la corrélation entre l'age des
                            rolistes<br> et leurs dépenses annuelles ?
                        </button>
                    </div>
                    <a id="all" class="button">Séparer</a>
                </div>

                <div class="col-lg-9" id="vis">
                </div>

                <div class="clear comment"></div>

            </div>

    </section><!-- #content end -->

    <section id="explanations">

        <div class="content-wrap">
            <div class="container-fullwidth clearfix">
                <h2>Qu'est-ce qu'Acthulhu ?</h2>
                <div class="col-lg-9">
                    <h4>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In quis justo mi. Cras rutrum porta
                        blandit. Sed porttitor ex eget elit aliquet dictum et eu dui. Praesent tortor lectus, pharetra
                        in
                        scelerisque a, consequat facilisis magna. Phasellus vel pretium erat, in vehicula felis. Sed
                        bibendum varius porttitor. Fusce volutpat ipsum neque, nec porttitor libero laoreet ut. Quisque
                        vestibulum orci sem. Sed interdum dapibus tristique. Cras ac sapien ipsum. Etiam aliquam, velit
                        placerat facilisis fermentum, sem neque accumsan magna, vitae fringilla purus enim tempor
                        turpis. In
                        in risus sed velit vulputate facilisis.
                    </h4>
                </div>
                <div class="col-lg-3">
                    <img src="cthulhulhu.png" alt="cthulhulhu le petit reporter envoyé par Nodens">
                </div>

            </div>
        </div>

    </section>

    <!-- Dataviz
    ============================================= -->
    <section id="dataviz">

        <div class="container-fullwidth clearfix">

        </div>

    </section><!-- #page-title end -->

    <!-- Footer
    ============================================= -->
    <footer id="footer" class="dark">

        <div class="container-fullwidth">

        </div>

        <!-- Copyrights
        ============================================= -->
        <div id="copyrights">

            <div class="container-fullwidth clearfix">

                <div class="col_half">
                    Copyrights &copy; 2017 All Rights Reserved by Acthulhu<br>
                </div>

                <div class="col_half col_last tright">
                    <div class="fright clearfix">
                        <a href="https://www.facebook.com/Acthulhu.News/" target="_blank"
                           class="social-icon si-small si-borderless si-facebook">
                            <i class="icon-facebook"></i>
                            <i class="icon-facebook"></i>
                        </a>

                        <a href="https://twitter.com/Cthulhulhu_news?lang=fr" target="_blank"
                           class="social-icon si-small si-borderless si-twitter">
                            <i class="icon-twitter"></i>
                            <i class="icon-twitter"></i>
                        </a>

                        <a href="https://github.com/lecole-ldlc/Acthulhu_DataViz" target="_blank"
                           class="social-icon si-small si-borderless si-github">
                            <i class="icon-github"></i>
                            <i class="icon-github"></i>
                        </a>
                    </div>

                    <i class="icon-envelope2"></i><a class="middot" href="mailto:hello@acthulhu.fr">
                    hello@acthulhu.fr </a>
                </div>

            </div>

        </div><!-- #copyrights end -->


        <script src="js/tooltip.js"></script>
        <script src="js/bubble_chart.js"></script>
        <a href="https://acthulhu.fr/">Acthulhu, l'actu tentaculaire</a>
    </footer><!-- #footer end -->

</div><!-- #wrapper end -->

<!-- Go To Top
============================================= -->
<div id="gotoTop" class="icon-angle-up"></div>

<!-- External JavaScripts
============================================= -->
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/plugins.js"></script>

<!-- Footer Scripts
============================================= -->
<script type="text/javascript" src="js/functions.js"></script>

<script>
    function toggle(anId) {
        node = document.getElementById(anId);
        if (node.style.visibility == "hidden") {
            // Contenu caché, le montrer
            node.style.visibility = "visible";
            node.style.height = "auto";			// Optionnel rétablir la hauteur
        }
        else {
            // Contenu visible, le cacher
            node.style.visibility = "hidden";
            node.style.height = "0";			// Optionnel libérer l'espace
        }
    }
</script>

<script>
    var myBubbleChart = bubbleChart();
    var data = [];

    /*
     * Function called once data is loaded from CSV.
     * Calls bubble chart function to display inside #vis div.
     */
    function data_loaded(error, data_l) {
        if (error) {
            console.log(error);
        }
        console.log(data_l);
        data = data_l;
        myBubbleChart = bubbleChart();
        myBubbleChart('#vis', data, "AnneeNaissance", "PJMJ");
        setupButtons();
    }

    $(".problematique").click(function (e) {
        var key1 = $(this).attr('data-key1');
        var key2 = $(this).attr('data-key2');
        console.log(key1, key2);
        myBubbleChart.redraw(key1, key2);
    });

    /*
     * Sets up the layout buttons to allow for toggling between view modes.
     */
    function setupButtons() {
        $("#all").click(function () {
            myBubbleChart.toggleDisplay();
        });
    }

    /*
     * Helper function to convert a number into a string
     * and add commas to it to improve presentation.
     */
    function addCommas(nStr) {
        nStr += '';
        var x = nStr.split('.');
        var x1 = x[0];
        var x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        while (rgx.test(x1)) {
            x1 = x1.replace(rgx, '$1' + ',' + '$2');
        }

        return x1 + x2;
    }

    // Load the data.
    d3.csv('1K_full_clean.csv', data_loaded);
    console.log("coucou");
</script>

</body>
</html>